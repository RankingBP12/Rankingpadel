import{r as s,a as n,o as R,j as e,P,d as u,b as S,s as q,u as w,c as E,p as k,f as F}from"./index-CHDpwGZf.js";const U=({onClose:r})=>{const[i,g]=s.useState(""),[t,h]=s.useState(null),[d,x]=s.useState(""),[b,p]=s.useState(""),[f,j]=s.useState([]);s.useEffect(()=>{const l=n(u,"clubs/"),a=R(l,c=>{const o=c.val(),L=o?Object.keys(o).map(m=>({id:m,...o[m]})):[];j(L)});return()=>a()},[]);const v=l=>{l.target.files.length>0&&h(l.target.files[0])},C=async l=>{if(l.preventDefault(),!t){alert("Por favor, seleccione un logo.");return}try{const a=S(q,`club-logos/${t.name}`);await w(a,t);const c=await E(a),o=n(u,"clubs/");await k(o,{name:i,logoURL:c,location:d,phone:b}),alert("Club guardado con éxito"),r()}catch(a){console.error("Error al guardar el club:",a),alert("Hubo un error al guardar el club.")}},N=l=>{window.confirm("¿Estás seguro de que deseas eliminar este club?")&&F(n(u,`clubs/${l}`)).then(()=>alert("Club eliminado con éxito")).catch(a=>alert("Hubo un error al eliminar el club:",a))},y=l=>{l.target.classList.contains("agregar-club-modal-overlay")&&r()};return e.jsx("div",{className:"agregar-club-modal-overlay",onClick:y,children:e.jsxs("div",{className:"agregar-club-modal-content",children:[e.jsx("button",{className:"modal-close",onClick:r,children:"×"}),e.jsx("h2",{children:"Agregar Club"}),e.jsxs("form",{className:"agregar-club-form",onSubmit:C,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"clubName",children:"Nombre del Club"}),e.jsx("input",{id:"clubName",type:"text",value:i,onChange:l=>g(l.target.value),placeholder:"Ingrese el nombre del club",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"clubLogo",children:"Logo del Club"}),e.jsx("input",{id:"clubLogo",type:"file",accept:"image/*",onChange:v,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"clubLocation",children:"Ubicación del Club"}),e.jsx("input",{id:"clubLocation",type:"text",value:d,onChange:l=>x(l.target.value),placeholder:"Ingrese la ubicación del club",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"clubPhone",children:"Teléfono del Club"}),e.jsx("input",{id:"clubPhone",type:"text",value:b,onChange:l=>p(l.target.value),placeholder:"Ingrese el teléfono del club",required:!0})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"save-button",type:"submit",children:"Guardar"}),e.jsx("button",{className:"cancel-button",type:"button",onClick:r,children:"Cancelar"})]})]}),e.jsx("h3",{children:"Lista de Clubes"}),e.jsx("div",{className:"club-list",children:f.map(l=>e.jsxs("div",{className:"club-icon",children:[e.jsx("img",{src:l.logoURL,alt:l.name,className:"club-logo"}),e.jsx("div",{className:"club-actions",children:e.jsx("button",{onClick:()=>N(l.id),children:"Eliminar"})})]},l.id))})]})})};U.propTypes={onClose:P.func.isRequired};export{U as default};

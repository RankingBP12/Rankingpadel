import{r as o,j as e,P as C,b as F,s as w,u as S,c as q,a as D,d as $,p as R}from"./index-CrmqcOUB.js";const k=({onClose:t})=>{const[i,m]=o.useState(""),[d,p]=o.useState(""),[u,f]=o.useState(""),[n,g]=o.useState(""),[s,v]=o.useState(""),[h,x]=o.useState(null),b=a=>{a.target.files.length>0&&x(a.target.files[0])},j=a=>{if(!a)return"";const[r,l,c]=a.split("-");return`${c}/${l}/${r}`},y=(a,r)=>new Date(`${a}T${r}`)>=new Date,N=async a=>{if(a.preventDefault(),!i||!d||!u||!n||!s||!h){alert("Por favor, complete todos los campos y seleccione un archivo.");return}if(!y(n,s)){alert("La fecha y hora del torneo no pueden ser anteriores a la fecha y hora actual.");return}try{const r=F(w,`torneos/${h.name}`);await S(r,h);const l=await q(r),c=D($,"torneos/");await R(c,{nombre:i,ubicacion:d,telefono:u,fecha:j(n),hora:s,archivoURL:l}),alert("Torneo guardado con éxito"),t()}catch(r){console.error("Error al guardar el torneo:",r),alert("Hubo un error al guardar el torneo.")}},T=a=>{a.target.classList.contains("agenda-torneo-modal-overlay")&&t()};return e.jsx("div",{className:"agenda-torneo-modal-overlay",onClick:T,children:e.jsxs("div",{className:"agenda-torneo-modal-content",children:[e.jsx("button",{className:"modal-close",onClick:t,children:"×"}),e.jsx("h2",{children:"Agendar Torneo"}),e.jsxs("form",{className:"agenda-torneo-form",onSubmit:N,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre del Torneo"}),e.jsx("input",{id:"nombre",type:"text",value:i,onChange:a=>m(a.target.value),placeholder:"Ingrese el nombre del torneo",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"ubicacion",children:"Ubicación"}),e.jsx("input",{id:"ubicacion",type:"text",value:d,onChange:a=>p(a.target.value),placeholder:"Ingrese la ubicación",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"telefono",children:"Teléfono"}),e.jsx("input",{id:"telefono",type:"text",value:u,onChange:a=>f(a.target.value),placeholder:"Ingrese el teléfono",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"fecha",children:"Fecha"}),e.jsx("input",{id:"fecha",type:"date",value:n,onChange:a=>g(a.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"hora",children:"Hora"}),e.jsx("input",{id:"hora",type:"time",value:s,onChange:a=>v(a.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"archivo",children:"Archivo"}),e.jsx("input",{id:"archivo",type:"file",accept:"application/pdf, image/*",onChange:b,required:!0})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"save-button",type:"submit",children:"Guardar"}),e.jsx("button",{className:"cancel-button",type:"button",onClick:t,children:"Cancelar"})]})]})]})})};k.propTypes={onClose:C.func.isRequired};export{k as default};

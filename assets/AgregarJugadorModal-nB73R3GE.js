import{r as l,j as e,P as g,a as j,d as x,g as A,b as G,s as q,u as T,c as U,h as b}from"./index-qhty-QVc.js";import{G as N}from"./nombre-BYGSWZGL.js";const $=({onClose:p,editPlayer:a,setEditPlayer:S,jugadores:v,setJugadores:f})=>{const[c,y]=l.useState(a?a.name:""),[u,C]=l.useState(null),[m,R]=l.useState(a?a.points:""),[i,I]=l.useState(a?a.gender:""),[d,E]=l.useState(a?a.category:""),[h,F]=l.useState(null);l.useEffect(()=>{(async()=>{try{const t=j(x,"jugadores/"),r=(await A(t)).val()||{},n=Object.keys(r).map(k=>r[k].id),L=n.length>0?Math.max(...n):0;F(L+1)}catch(t){console.error("Error al obtener el siguiente ID:",t)}})()},[]);const J=async o=>{o.preventDefault();const t=m.trim()===""?0:parseInt(m,10);if(!c||!i||!d){alert("Nombre, género y categoría son obligatorios.");return}if(isNaN(t)||t<0){alert("Los puntos deben ser un número positivo.");return}try{let s=N;if(u){const r=G(q,`jugadores/${u.name}`);await T(r,u),s=await U(r)}if(a){const r=j(x,`jugadores/${a.id}`);await b(r,{id:a.id,name:c,points:t,gender:i,category:d,photoURL:s});const n={...v};n[a.id]={id:a.id,name:c,points:t,gender:i,category:d,photoURL:s},f(n),alert("Jugador actualizado con éxito"),S(null)}else{const r=j(x,`jugadores/${h}`);await b(r,{id:h,name:c,points:t,gender:i,category:d,photoURL:s});const n={...v};n[h]={id:h,name:c,points:t,gender:i,category:d,photoURL:s},f(n),alert("Jugador guardado con éxito")}p()}catch(s){console.error("Error al guardar el jugador:",s),alert("Hubo un error al guardar el jugador.")}},O=o=>{o.target.classList.contains("agregar-jugador-modal-overlay")&&p()},w=o=>{C(o.target.files[0])};return e.jsx("div",{className:"agregar-jugador-modal-overlay",onClick:O,children:e.jsxs("div",{className:"agregar-jugador-modal-content",children:[e.jsx("button",{className:"modal-close",onClick:p,children:"×"}),e.jsx("h2",{children:a?"Editar Jugador":"Agregar Jugador"}),e.jsxs("form",{className:"agregar-jugador-form",onSubmit:J,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Nombre del Jugador"}),e.jsx("input",{id:"name",type:"text",value:c,onChange:o=>y(o.target.value),placeholder:"Ingrese el nombre del jugador",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"photo",children:"Foto del Jugador (opcional)"}),e.jsx("input",{id:"photo",type:"file",accept:"image/*",onChange:w})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"points",children:"Puntos"}),e.jsx("input",{id:"points",type:"number",value:m,onChange:o=>R(o.target.value),placeholder:"Ingrese los puntos",min:"0"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"gender",children:"Género"}),e.jsxs("select",{id:"gender",value:i,onChange:o=>I(o.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un género"}),e.jsx("option",{value:"masculino",children:"Masculino"}),e.jsx("option",{value:"femenino",children:"Femenino"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"category",children:"Categoría"}),e.jsxs("select",{id:"category",value:d,onChange:o=>E(o.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Seleccione una categoría"}),e.jsx("option",{value:"Primera",children:"Primera"}),e.jsx("option",{value:"Segunda",children:"Segunda"}),e.jsx("option",{value:"Tercera",children:"Tercera"}),e.jsx("option",{value:"Cuarta",children:"Cuarta"}),e.jsx("option",{value:"Quinta",children:"Quinta"}),e.jsx("option",{value:"Sexta",children:"Sexta"}),e.jsx("option",{value:"Septima",children:"Séptima"}),e.jsx("option",{value:"OctavaA",children:"Octava A"}),e.jsx("option",{value:"OctavaB",children:"Octava B"})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"save-button",type:"submit",children:"Guardar"}),e.jsx("button",{className:"cancel-button",type:"button",onClick:p,children:"Cancelar"})]})]}),e.jsx("div",{className:"avatar-container",children:e.jsx("img",{src:u?URL.createObjectURL(u):N,alt:"Avatar",className:"avatar-image"})})]})})};$.propTypes={onClose:g.func.isRequired,editPlayer:g.object,setEditPlayer:g.func,jugadores:g.object,setJugadores:g.func};export{$ as default};

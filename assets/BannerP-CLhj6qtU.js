import{r as c,A,j as r}from"./index-BDcw6WbW.js";const D=()=>{const{banners:e}=c.useContext(A),[l,a]=c.useState(0),[m,g]=c.useState(!0),h=c.useRef(null),x=c.useRef(null),j=c.useRef(null);c.useEffect(()=>{if(!e||e.length===0)return;const t=n=>{const o=h.current;n>=e.length&&a(0),n<0&&a(e.length-1),o.style.transform=`translateX(${-l*100}%)`,i()},i=()=>{x.current.querySelectorAll(".dot").forEach((o,f)=>{o.classList.toggle("active",f===l)})},p=()=>{j.current=setInterval(()=>{m&&a(n=>(n+1)%e.length)},3e3)},b=()=>{let n=0,o=0,f=0,d=!1;const s=h.current,E=u=>{n=u.clientX,s.style.transition="none",d=!0,g(!1)},y=u=>{d&&(o=u.clientX-n,s.style.transform=`translateX(${o+f}px)`)},L=u=>{if(!d)return;const N=u.clientX-n;let v=l;N<-50?v=(l+1)%e.length:N>50&&(v=(l-1+e.length)%e.length),a(v),t(v),f+=o,s.style.transition="transform 0.3s ease-out",d=!1,g(!0),n=void 0,o=0};return s.addEventListener("pointerdown",E),s.addEventListener("pointermove",y),s.addEventListener("pointerup",L),s.addEventListener("pointercancel",()=>{d=!1}),()=>{s.removeEventListener("pointerdown",E),s.removeEventListener("pointermove",y),s.removeEventListener("pointerup",L)}};t(l),p();const w=b();return()=>{clearInterval(j.current),w()}},[l,m,e]);const R=()=>{a(t=>(t+1)%e.length)},S=()=>{a(t=>(t-1+e.length)%e.length)},X=t=>{a(t)};return r.jsxs("div",{className:"banner-slider",children:[r.jsx("div",{className:"slides",ref:h,children:e&&e.length>0?e.map((t,i)=>r.jsx("div",{className:"slide",children:r.jsx("a",{href:t.link,children:r.jsx("img",{src:t.photoURL,alt:t.title,className:"banner-slide-image",onError:p=>{p.target.onerror=null,p.target.src="https://via.placeholder.com/150"}})})},i)):r.jsx("div",{children:"No banners available"})}),r.jsx("div",{className:"dots",ref:x,children:e&&e.map((t,i)=>r.jsx("span",{className:`dot ${i===l?"active":""}`,onClick:()=>X(i)},i))}),r.jsx("button",{className:"prev",onClick:S,children:"❮"}),r.jsx("button",{className:"next",onClick:R,children:"❯"})]})};export{D as default};

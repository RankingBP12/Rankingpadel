import{r as n,j as e,e as x,f as v,h as q,d as A,s as L,u as T,g as $,i as N}from"./index-BDcw6WbW.js";import{P as g}from"./index-B05dcSbW.js";const B=({onClose:p,editPlayer:a,setEditPlayer:S,jugadores:f,setJugadores:b})=>{const[l,y]=n.useState(a?a.name:""),[m,C]=n.useState(null),[j,I]=n.useState(a?a.points:""),[c,R]=n.useState(a?a.gender:""),[i,E]=n.useState(a?a.category:""),[h,F]=n.useState(null);n.useEffect(()=>{(async()=>{try{const t=x(v,"jugadores/"),r=(await q(t)).val()||{},u=Object.keys(r).map(k=>r[k].id),s=u.length>0?Math.max(...u):0;F(s+1)}catch(t){console.error("Error al obtener el siguiente ID:",t)}})()},[]);const J=async o=>{o.preventDefault();const t=j.trim()===""?0:parseInt(j,10);if(!l||!m||!c||!i){alert("Nombre, foto, género y categoría son obligatorios.");return}if(isNaN(t)||t<0){alert("Los puntos deben ser un número positivo.");return}try{const d=A(L,`jugadores/${m.name}`);await T(d,m);const r=await $(d);if(a){const u=x(v,`jugadores/${a.id}`);await N(u,{id:a.id,name:l,points:t,gender:c,category:i,photoURL:r});const s={...f};s[a.id]={id:a.id,name:l,points:t,gender:c,category:i,photoURL:r},b(s),alert("Jugador actualizado con éxito"),S(null)}else{const u=x(v,`jugadores/${h}`);await N(u,{id:h,name:l,points:t,gender:c,category:i,photoURL:r});const s={...f};s[h]={id:h,name:l,points:t,gender:c,category:i,photoURL:r},b(s),alert("Jugador guardado con éxito")}p()}catch(d){console.error("Error al guardar el jugador:",d),alert("Hubo un error al guardar el jugador.")}},w=o=>{o.target.classList.contains("agregar-jugador-modal-overlay")&&p()},O=o=>{C(o.target.files[0])};return e.jsx("div",{className:"agregar-jugador-modal-overlay",onClick:w,children:e.jsxs("div",{className:"agregar-jugador-modal-content",children:[e.jsx("button",{className:"modal-close",onClick:p,children:"×"}),e.jsx("h2",{children:a?"Editar Jugador":"Agregar Jugador"}),e.jsxs("form",{className:"agregar-jugador-form",onSubmit:J,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Nombre del Jugador"}),e.jsx("input",{id:"name",type:"text",value:l,onChange:o=>y(o.target.value),placeholder:"Ingrese el nombre del jugador",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"photo",children:"Foto del Jugador"}),e.jsx("input",{id:"photo",type:"file",accept:"image/*",onChange:O,required:!a})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"points",children:"Puntos"}),e.jsx("input",{id:"points",type:"number",value:j,onChange:o=>I(o.target.value),placeholder:"Ingrese los puntos",min:"0"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"gender",children:"Género"}),e.jsxs("select",{id:"gender",value:c,onChange:o=>R(o.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un género"}),e.jsx("option",{value:"masculino",children:"Masculino"}),e.jsx("option",{value:"femenino",children:"Femenino"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"category",children:"Categoría"}),e.jsxs("select",{id:"category",value:i,onChange:o=>E(o.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Seleccione una categoría"}),e.jsx("option",{value:"Primera",children:"Primera"}),e.jsx("option",{value:"Segunda",children:"Segunda"}),e.jsx("option",{value:"Tercera",children:"Tercera"}),e.jsx("option",{value:"Cuarta",children:"Cuarta"}),e.jsx("option",{value:"Quinta",children:"Quinta"}),e.jsx("option",{value:"Sexta",children:"Sexta"}),e.jsx("option",{value:"Septima",children:"Séptima"}),e.jsx("option",{value:"OctavaA",children:"Octava A"}),e.jsx("option",{value:"OctavaB",children:"Octava B"})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"save-button",type:"submit",children:"Guardar"}),e.jsx("button",{className:"cancel-button",type:"button",onClick:p,children:"Cancelar"})]})]})]})})};B.propTypes={onClose:g.func.isRequired,editPlayer:g.object,setEditPlayer:g.func,jugadores:g.object,setJugadores:g.func};export{B as default};
